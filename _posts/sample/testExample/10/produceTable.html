<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>produceTable</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            table td,table{
                border:1px solid #000;
            }table td{
                width:20px;
                height:20px;
            }
        </style>
    </head>
    <body>
        <h2><a href="www.baidu.com" target="_blank" accesskey="c" >click me</a></h2>
        <label for="line" contenteditable="false">line:</label><input id="line" type="text" />
        <label for="column">column:</label><input id="column" type="text"/>
        <input id="btn" type="button" value="click"/>
        <div id="see"></div>
        <div id="show">
        </div>
        <script>
            /*
            
            要求：
            1) 任意输入行数或列数, 生成对应表格;
            2) 行数, 列数必须为正整数类型, 否则提示非法;(这里我用正则限制1-100, 避免网友测试输入过大值造成浏览器假死)
            3) 在生成表格的单元格中随机填入1到15之间的随机数, 并给每个单元格设置随机背景颜色;
            4) 点击任意单元格, 将其数和背景颜色输出显示;
            5) 效率要求：100*100生成表格时间小于3秒;
            6) 代码中要用到事件代理机制;
            7) 设计一种简单机制, 使单元格数小于255*255*255时, 颜色不重复
            8) 要求符合w3c验证, 兼容IE, Firefox, chrome等浏览器
           */
            createTable = {
                getRanColor:function(){
                    var str = this.getRanNum(0xFFFFFF,0).toString(16);//变成字符，并且是十六进制
                    while(str.length<6)str = '0' + str;//用while防止加一个0还是不到6位数这种情况
                    return '#' + str;
                },
                getRanNum:function(max,min){
                    return Math.floor(Math.random()*(max-min+1)+min);
                }
            }
            window.onload = function(){
                //Math.random()// 0.0~1.0(不包括首尾)
                var oLine = document.getElementById('line');
                var oColumn = document.getElementById('column');
                var oBtn = document.getElementById('btn');
                var oShow = document.getElementById('show');
                var oSee = document.getElementById('see');
                
                oSee.style.display = 'none';
                
                oLine.onkeydown = oColumn.onkeydown = function(){
                }
                oBtn.onclick = function(){
                    var iLine = oLine.value;
                    var iColumn = oColumn.value;
                    var reg = /^((?!0)\d{1,2}|100)$/;
                    if(!reg.test(iLine)){
                        return false;
                    };
                    if(!reg.test(iColumn)){
                        return false;
                    };
                    var str = '';
                    
                    str = '<table>';
                    for(var i=0;i<iLine;i++){
                        str += '<tr>';
                        for(var j=0;j<iColumn;j++){
                            str += '<td style="background:'+createTable.getRanColor()+'">';
                            str += createTable.getRanNum(1,15);
                            str += '</td>';
                        }
                        str += '</tr>';
                    }
                    str += '</table>';
                    oShow.innerHTML = str;
                }
                
                oShow.onclick = function(ev){
                    var e = ev || window.event;
                    var oTarget = e.target || e.srcElement;//元素级别 获取元素
                    oSee.style.display = 'block';
                    if(oTarget.tagName.toUpperCase() === "TD"){
                        oSee.innerHTML = 'the td your click has <em>'+ oTarget.style.background
                        + ' </em>as color and <b>'+oTarget.innerHTML+'</b> as value';
                    }
                }
            }
        </script>
    </body>
</html>
